commands:
  01_download_card_data:
    command: |
      set -e
      cd /var/app/staging
      echo "Downloading card data from S3..."
      node -e "
      require('module-alias/register');
      const { updateCardbase } = require('./dist/server/src/serverutils/updatecards');
      updateCardbase('private', process.env.DATA_BUCKET || 'cubecobra-data')
        .then(() => {
          console.log('Card data downloaded successfully');
          process.exit(0);
        })
        .catch((err) => {
          console.error('Failed to download card data:', err);
          process.exit(1);
        });
      "
    leader_only: true
