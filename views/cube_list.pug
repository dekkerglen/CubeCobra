extends layout

block content  
  style(type='text/css').
    @media (min-width: 768px){
    .seven-cols .col-md-1,
    .seven-cols .col-sm-1,
    .seven-cols .col-lg-1  {
    width: 100%;
    *width: 100%;
    }
    }
    @media (min-width: 992px) {
    .seven-cols .col-md-1,
    .seven-cols .col-sm-1,
    .seven-cols .col-lg-1 {
    width: 14.285714285714285714285714285714%;
    *width: 14.285714285714285714285714285714%;
    max-width: 14.285714285714285714285714285714% !important;
    flex:none !important;
    }
    }
    @media (min-width: 1200px) {
    .seven-cols .col-md-1,
    .seven-cols .col-sm-1,
    .seven-cols .col-lg-1 {
    width: 14.285714285714285714285714285714%;
    *width: 14.285714285714285714285714285714%;
    max-width: 14.285714285714285714285714285714% !important;
    flex:none !important;
    }
    }
    .list-group-item {
    padding: 3px 3px
    }
    ul.list-group {
    padding: 3px 0px
    }
    .list-group,
    .list-group-item{
    display:block;
    }
    .col-md-1{
    padding:3px
    } 
    #thumbwrap {
    margin:75px auto;
    width:252px; height:252px;
    }
    .thumb {
    position:relative;
    }
    .thumb img { 
    border:1px solid #000;
    vertical-align:bottom;
    }
    .thumb:hover {
    border:0; /* IE6 needs this to show large image */
    z-index:1;
    }
    .thumb span { 
    float:left; /* must be floated for same cross browser position of larger image */
    position:absolute;
    visibility:hidden;
    }
    .thumb:hover span { 
    visibility:visible;
    top:5px; left:100px; 
    }
    		

  h5
    nav(aria-label='breadcrumb')
      ol.breadcrumb
        li.breadcrumb-item
          a(href='#') #{owner}
        li.breadcrumb-item.active(aria-current='page')= cube.name
      

  ul.nav.nav-tabs.nav-fill.nav-justified
      li.nav-item
        a.nav-link.active(href='/cube/list/'+cube._id) List
      li.nav-item
        a.nav-link(href='/cube/playtest/'+cube._id) Playtest
      li.nav-item
        a.nav-link(href='/cube/analysis/'+cube._id) Analysis
      li.nav-item
        a.nav-link(href='/cube/blog/'+cube._id) Blog
        
  if user
    if user.id == cube.owner
      .pos-f-t
        nav.navbar.navbar-expand-lg.navbar-light.bg-light
          .collapse.navbar-collapse
            ul.navbar-nav
              li.nav-item
                a.nav-link(href='#', data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation") Add/Remove Cards
              li.nav-item.dropdown
                a#bulkdropdown.nav-link.dropdown-toggle(href='#', role='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false') Bulk Upload
                .dropdown-menu(aria-labelledby='bulkdropdown')
                  a.dropdown-item(href='#', data-toggle='modal', data-target='#exampleModalScrollable') Paste Text
                  a.dropdown-item(href='#') Upload File
              li.nav-item.dropdown
                a#exportdropdown.nav-link.dropdown-toggle(href='#', role='button', data-toggle='dropdown', aria-haspopup='true', aria-expanded='false') Export
                .dropdown-menu(aria-labelledby='exportdropdown')
                  a.dropdown-item(href='#') Plain Text (.txt)
                  a.dropdown-item(href='#') Comma Separated (.csv)
                  a.dropdown-item(href='#') MTGSalvation (.txt)
                    br
        #navbarToggleExternalContent.collapse
          .container.bg-light
            .row
              .col
                  form(autocomplete='off').form-inline
                    .form-group.mb-2.autocomplete
                      input.form-control#myInput(style='width: 300px', type='text', name='myCountry', placeholder='Card to Add')
                    button.btn.btn-success.mx-sm-1.mb-2(type='button') Just Add
                    button.btn.btn-success.mb-2(type='button') Suggest Cuts
              .col
                form.form-inline
                  .form-group.mb-2.autocomplete
                    input.form-control#myInput2(style='width: 300px', type='text', placeholder='Card to Remove')
                  button.btn.btn-success.mx-sm-1.mb-2(type='button') Remove / Replace
            .row
              .col
                form(method='POST', action='/cube/edit/'+cube._id)
                  #form-group
                    label Changelist:
                    textarea.form-control(name='body')=cube.body
                  br
                  input.btn.mr-sm-2.btn-success(type='submit',value='Save Changes')
                  input.btn.mr-sm-2.btn-danger(type='button', value='Discard')
                br
              .col
                br
      input#cubeID(type='hidden', name='cubeID', value=cube._id)
      script(src='/js/autocomplete.js')

  br
  .container
    .row.seven-cols
      .col-md-1   
        list-group
          each card, i in cards.white
            a.thumb
              li.list-group-item(style='background-color: #FFFAE8;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.blue
            a.thumb
              li.list-group-item(style='background-color: #B7E1FF;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.black
            a.thumb
              li.list-group-item(style='background-color: #C2A7C9;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.red
            a.thumb
              li.list-group-item(style='background-color: #DB878D;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.green
            a.thumb
              li.list-group-item(style='background-color: #9ED3A4;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.colorless
            a.thumb
              li.list-group-item(style='background-color: #CCCCCC;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")
      .col-md-1
        ul.list-group
          each card, i in cards.multi
            a.thumb
              li.list-group-item(style='background-color: #FFEC99;')= card.name
              span
                img(src=card.image_normal, alt='', width="250", height="350")


  // Modal
  #exampleModalScrollable.modal.fade(tabindex='-1', role='dialog', aria-labelledby='exampleModalScrollableTitle', aria-hidden='true')
    .modal-dialog.modal-dialog-scrollable(role='document')
      .modal-content
        form(method='POST', action='/cube/bulkupload/'+cube._id)
          .modal-header
            h5#exampleModalScrollableTitle.modal-title Bulk Upload - Paste Text
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') Ã—
          .modal-body
              textarea.form-control(maxlength='20000',rows='10', style='height:100%;', placeholder="Paste Cube Here (max length 20000)", name='body')
          .modal-footer
            #bulkspinner.collapse.spinner-border.text-success(role='status')
              span.sr-only Loading...
            button.btn.btn-success(type='submit', data-toggle='collapse', href='#bulkspinner') Upload
            button.btn.btn-secondary(type='button', data-dismiss='modal') Close

            
